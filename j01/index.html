
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="SANS Cloud Security Flight Simulator setup instructions and bootstrap template.">
      
      
        <meta name="author" content="Eric Johnson, Ben Allen, and Frank Kim">
      
      
      
      
      
        
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>SANS SEC540 Cloud Security Simulator Setup Guide (J01) - SANS Cloud Security Flight Simulator Instructions</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="orange" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sans-sec540-cloud-security-simulator-setup-guide-j01" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="SANS Cloud Security Flight Simulator Instructions" class="md-header__button md-logo" aria-label="SANS Cloud Security Flight Simulator Instructions" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 18H13v2H6.5c-1.5 0-2.81-.5-3.89-1.57C1.54 17.38 1 16.09 1 14.58q0-1.95 1.17-3.48C3.34 9.57 4 9.43 5.25 9.15c.42-1.53 1.25-2.77 2.5-3.72S10.42 4 12 4c1.95 0 3.6.68 4.96 2.04 1.12 1.12 1.77 2.46 1.97 3.96-.7 0-1.37.19-1.98.46a4.8 4.8 0 0 0-1.41-3C14.56 6.5 13.38 6 12 6s-2.56.5-3.54 1.46C7.5 8.44 7 9.62 7 11h-.5c-.97 0-1.79.34-2.47 1.03-.69.68-1.03 1.5-1.03 2.47s.34 1.79 1.03 2.5c.68.66 1.5 1 2.47 1m16.5-.7v3.5c0 .6-.6 1.2-1.3 1.2h-5.5c-.6 0-1.2-.6-1.2-1.3v-3.5c0-.6.6-1.2 1.2-1.2v-1.5c0-1.4 1.4-2.5 2.8-2.5s2.8 1.1 2.8 2.5V16c.6 0 1.2.6 1.2 1.3m-2.5-2.8c0-.8-.7-1.3-1.5-1.3s-1.5.5-1.5 1.3V16h3z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SANS Cloud Security Flight Simulator Instructions
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SANS SEC540 Cloud Security Simulator Setup Guide (J01)
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../k01/" class="md-tabs__link">
        
  
  
    
  
  SEC540-K01

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../sec545-k02/" class="md-tabs__link">
        
  
  
    
  
  SEC545-K02

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="SANS Cloud Security Flight Simulator Instructions" class="md-nav__button md-logo" aria-label="SANS Cloud Security Flight Simulator Instructions" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 18H13v2H6.5c-1.5 0-2.81-.5-3.89-1.57C1.54 17.38 1 16.09 1 14.58q0-1.95 1.17-3.48C3.34 9.57 4 9.43 5.25 9.15c.42-1.53 1.25-2.77 2.5-3.72S10.42 4 12 4c1.95 0 3.6.68 4.96 2.04 1.12 1.12 1.77 2.46 1.97 3.96-.7 0-1.37.19-1.98.46a4.8 4.8 0 0 0-1.41-3C14.56 6.5 13.38 6 12 6s-2.56.5-3.54 1.46C7.5 8.44 7 9.62 7 11h-.5c-.97 0-1.79.34-2.47 1.03-.69.68-1.03 1.5-1.03 2.47s.34 1.79 1.03 2.5c.68.66 1.5 1 2.47 1m16.5-.7v3.5c0 .6-.6 1.2-1.3 1.2h-5.5c-.6 0-1.2-.6-1.2-1.3v-3.5c0-.6.6-1.2 1.2-1.2v-1.5c0-1.4 1.4-2.5 2.8-2.5s2.8 1.1 2.8 2.5V16c.6 0 1.2.6 1.2 1.3m-2.5-2.8c0-.8-.7-1.3-1.5-1.3s-1.5.5-1.5 1.3V16h3z"/></svg>

    </a>
    SANS Cloud Security Flight Simulator Instructions
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../k01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SEC540-K01
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sec545-k02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SEC545-K02
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#devops-server-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        DevOps Server Deployment
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DevOps Server Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Requirements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-by-step-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step by Step Instructions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aws-devsecops-iam-user" class="md-nav__link">
    <span class="md-ellipsis">
      
        AWS DevSecOps IAM User
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AWS DevSecOps IAM User">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Requirements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-by-step-instructions_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step by Step Instructions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure-service-principal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Azure Service Principal
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Azure Service Principal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Requirements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-by-step-instructions_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step by Step Instructions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clean-up" class="md-nav__link">
    <span class="md-ellipsis">
      
        Clean Up
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  
  




<h1 id="sans-sec540-cloud-security-simulator-setup-guide-j01">SANS SEC540 Cloud Security Simulator Setup Guide (J01)</h1>
<p>SEC540 students can follow these instructions to build the labs in their personal AWS and Azure accounts. Doing so allows students to complete the labs after access to the SANS provisioned accounts is expired. Cost estimates vary by cloud provider:</p>
<ul>
<li>
<p>AWS free tier eligible accounts are expected to cost roughly $10 USD per day for the AWS resources (including the DevOps server). Make sure you stop the DevOps server when you are not using it.</p>
</li>
<li>
<p>Azure Pay as You Go (PAYG) subscriptions are expected to cost roughly $20 USD per day for the Azure resources.</p>
</li>
</ul>
<p>To limit costs, please make sure to run the <strong>Lab 5.4: Tear Down</strong> script in the electronic workbook when you are not using the lab environment.</p>
<div class="admonition warning">
<p class="admonition-title">YOUR Financial Responsibility</p>
<p>When running the Cloud Security Flight Simulator and performing the corresponding labs in your personal AWS / Azure environments, <strong>YOU</strong> are responsible for all costs.</p>
</div>
<h2 id="devops-server-deployment">DevOps Server Deployment</h2>
<h3 id="requirements">Requirements</h3>
<ul>
<li>Provided by you:<ul>
<li>AWS personal account with administrator credentials</li>
<li><a href="https://www.terraform.io/" target="_blank">Terraform 1.9</a> or later</li>
<li><a href="https://aws.amazon.com/cli/" target="_blank">AWS CLI</a></li>
</ul>
</li>
<li>Provided by the SEC540 instructor or OnDemand SME:<ul>
<li>DevOps server AMI shared to your personal AWS account</li>
<li>Commands to set the Terraform variables and apply the template</li>
</ul>
</li>
</ul>
<h3 id="step-by-step-instructions">Step by Step Instructions</h3>
<ol>
<li>
<p>Configure your AWS CLI with administrator credentials for your AWS Account.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>aws<span class="w"> </span>configure
</span></code></pre></div>
</li>
<li>
<p>Create a new working directory for running the Terraform deployment.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>mkdir<span class="w"> </span>~/sec540
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">cd</span><span class="w"> </span>~/sec540
</span></code></pre></div>
</li>
<li>
<p>Download the <a href="../assets/sec540-j01.tf">sec540-j01.tf</a> launch template (e.g. <em>sec540-j01-ami.tf</em>) into the <code>~/sec540</code> directory.</p>
</li>
<li>
<p>After sharing the AMI with your personal AWS account, the instructor or OnDemand SME will give you the commands to set the required Terraform variables and apply the template. Run those commands in the <code>~/sec540</code> directory.</p>
</li>
<li>
<p>The <code>terraform apply</code> command will take a few minutes to complete. Once it is finished, you will see the following:</p>
</li>
<li>
<p>The <code>environment_summary</code> output contains the information you need to connect to the DevOps server.</p>
</li>
<li>
<p><em>SmartProxy Config</em> - The name of the SmartProxy configuration file created by Terraform in the <code>~/sec540</code> directory.</p>
</li>
<li>
<p><em>SSH + SOCKS Connect Command</em> - The command to connect to the DevOps server using SSH and the SOCKS proxy using the private key created by Terraform in the <code>~/sec540</code> directory.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>Apply complete! Resources: 16 added, 0 changed, 0 destroyed.
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>Outputs:
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>environment_summary = &lt;&lt;END_SUMMARY
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>Latest AMI:  ami-01234567890123456 - sans-sec540-j01.24.1.123
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>Running AMI: ami-01234567890123456
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>Public IP:   18.227.81.85
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>Local IP:          11.222.333.444
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>Allow CIDR:        11.222.333.444/32
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>Proxy Pass:        informally_typically_humble_squid
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>SmartProxy Config: SmartProxy-frank-man.json
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>SSH + SOCKS Connect Command
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>    ssh -i frank-man.pem -D 54561 student@18.227.81.85
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>END_SUMMARY
</span></code></pre></div>
</li>
<li>
<p>Follow the <a href="../getting-started-k01/">Range Access Instructions</a> to install the DevOps server's CA certificate, configure the SmartProxy extension, and connect to the DevOps server.</p>
</li>
</ol>
<h2 id="aws-devsecops-iam-user">AWS DevSecOps IAM User</h2>
<p>To deploy the lab infrastructure to AWS, you need to create a new <code>devsecops</code> IAM user. The easiest to to set permissions is by attaching the <strong>AdministratorAccess</strong> policy. Our recommendation is to use a permission boundary on this IAM user to restrict access to the services not used in the AWS labs. Then, create a new pair of access keys for authenticating the DevOps server to your account.</p>
<h3 id="requirements_1">Requirements</h3>
<ul>
<li>Provided by you:</li>
<li>AWS personal account with administrator credentials</li>
</ul>
<h3 id="step-by-step-instructions_1">Step by Step Instructions</h3>
<ol>
<li>
<p>Log into the AWS Console using your personal administrator account.</p>
</li>
<li>
<p>See the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html" target="_blank">Creating an IAM user in your AWS account</a> documentation to create a new <code>devsecops</code> user.</p>
</li>
<li>
<p>See the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_change-permissions.html#users_change_permissions-add-console" target="_blank">Adding permissions to a user (console)</a> documentation to attach the <code>AdministratorAccess</code> policy.</p>
</li>
<li>
<p>See the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html" target="_blank">Managing access keys for IAM users</a> documentation to create a new pair of access keys for the <code>devsecops</code> user.</p>
</li>
<li>
<p>Follow the <strong>Lab 1.0 - AWS Cloud Account Setup</strong> instructions in the electronic workbook to configure the DevOps server's AWS Command Line Interface (CLI).</p>
</li>
</ol>
<h2 id="azure-service-principal">Azure Service Principal</h2>
<p>To deploy the lab infrastructure to Azure, you need to create a new Azure Service Principal for authenticating the DevOps server to your Azure subscription.</p>
<h3 id="requirements_2">Requirements</h3>
<ul>
<li>Provided by you:</li>
<li>Azure Pay as You Go (PAYG) subscription with owner permissions</li>
</ul>
<h3 id="step-by-step-instructions_2">Step by Step Instructions</h3>
<ol>
<li>
<p>Log into the Azure Portal using your personal administrator account.</p>
</li>
<li>
<p>Follow the <a href="https://learn.microsoft.com/en-us/entra/identity-platform/howto-create-service-principal-portal" target="_blank">Create a Microsoft Entra application and service principal that can access resources</a> documentation to create a new <code>devsecops</code> Azure Service Principal. The service principal will need the following <strong>API permissions</strong>:</p>
</li>
<li>
<p>Use the <strong>Microsoft Graph</strong> option to add the <strong>Application.ReadWrite.All</strong> application permission set.</p>
</li>
<li>
<p>On the Configured permissions screen, press <strong>Grant admin consent for Default Directory</strong>.</p>
</li>
<li>
<p>Follow the <a href="https://learn.microsoft.com/en-us/entra/identity-platform/howto-create-service-principal-portal#option-3-create-a-new-client-secret" target="_blank">Set up authetication option 3</a> documentation to create a new client secret for the <code>devsecops</code> Azure Service Principal.</p>
</li>
<li>
<p>Follow the <a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/role-assignments-portal-subscription-admin" target="_blank">Assign a user as an administrator of an Azure subscription</a> documentation to assign the <code>devsecops</code> Azure Service Principal as an <strong>Owner</strong> of your Azure subscription.</p>
</li>
<li>
<p>Follow the <strong>Lab 1.0 - Azure Cloud Account Setup</strong> instructions in the electronic workbook to populate the <code>~/.azconfigvars</code> file with the <code>devsecops</code> client id, client secret, tenant id, and subscription id. Then, complete the remaining Azure Command Line Interface (CLI) steps.</p>
</li>
</ol>
<h2 id="clean-up">Clean Up</h2>
<ul>
<li>
<p>When you are finished with the labs, run the <strong>Lab 5.4: Tear Down</strong> script in the electronic workbook to remove the lab infrastructure from your AWS and Azure accounts.</p>
</li>
<li>
<p>Then use the same Terraform commands you used to create the DevOps server, except change the last command from <code>terraform apply</code> to <code>terraform destroy</code>. This will remove the DevOps server and the SmartProxy configuration file from your AWS account.</p>
</li>
</ul>







  
  




  



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Â©2025 Eric Johnson, Ben Allen, and Frank Kim.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.indexes", "content.code.annotate", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>